<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="jquery-3.3.1.min.js"></script>

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Survey Questions</h1>
        </div>
        <hr>
        <form>
            <h2>About You</h2>
            <div class="form-group">
              <label for="formGroupExampleInput">Name (Required)</label>
              <input type="text" class="input-control" id="userName" placeholder="">
            </div>
            <div class="form-group">
              <label for="formGroupExampleInput2">Link to Photo Image (Required)</label>
              <input type="text" class="input-control" id="userImage" placeholder="">
            </div>
            <hr>
            <h2>Question 1</h2>
            <h6>Your mind is always buzzing with unexplored ideas and plans.</h6>
            <select class="form-control" id="q1">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 2</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q2">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 3</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q3">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 4</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q4">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 5</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q5">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 6</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q6">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 7</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q7">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 8</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q8">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 9</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q9">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <h2>Question 10</h2>
            <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
            <select class="form-control" id="q10">
                <option>1(Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5(Strongly Agree)</option>
            </select>
            <br>
            <button type="button" id="submitBtn" class="btn btn-primary btn-lg btn-block">Submit</button>
        </form>
        <hr>
        <br>
        <div class="routeLinks">
            <a href="">API Friends List</a> | <a href="">GitHub Repo</a>
        </div>
        <br>
    </div>
    <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        &times;
                    </button>
                    <h2 class="modal-title">Your Match</h2>
                </div>
                <div class="modal-body">
                    <h2 id="friendName"></h2>
                    <img
                        id="friendImage"
                        src="https://via.placeholder.com/400x400"
                        alt="Image not recieved"
                    />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $("#submitBtn").on("click", function() {
            function sendForm() {
                const validity = true;
                $(".input-control").each(function() {
                    if ($(this).val() === "") validity = false;
                });
                $(".form-control").each(function() {
                    if ($(this).val() === "") validity = false;
                })
                return validity;
            }
            if(sendForm() === true) {
                const userData = {
                    name: $("#userName").val(),
                    photo: $("#userImage").val(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val(),
                    ]
                };
                const url = window.location.origin;

                $.post(url + "/api/friends", userData, function(data) {
                    $("#friendName").text(data.name);
                    $("#friendImage").attr("src", data.photo);
                    $("#matchModal").modal("toggle");
                });
            } else {
                alert("You missed a spot!")
            }
        })
    </script>
</body>
</html>